!function t(e,n,i){function o(r,s){if(!n[r]){if(!e[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[r]={exports:{}};e[r][0].call(d.exports,function(t){var n=e[r][1][t];return o(n?n:t)},d,d.exports,t,e,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(t,e,n){!function(t,i){"object"==typeof n&&"object"==typeof e?e.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof n?n.postscribe=i():t.postscribe=i()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i=n(1),o=function(t){return t&&t.__esModule?t:{default:t}}(i);t.exports=o.default},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(){}function a(){var t=m.shift();if(t){var e=u.last(t);e.afterDequeue(),t.stream=r.apply(void 0,i(t)),e.afterStreamStart()}}function r(t,e,n){function i(t){t=n.beforeWrite(t),f.write(t),n.afterWrite(t)}f=new c.default(t,n),f.id=p++,f.name=n.name||f.id,s.streams[f.name]=f;var r=t.ownerDocument,l={close:r.close,open:r.open,write:r.write,writeln:r.writeln};Object.assign(r,{close:o,open:o,write:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i(e.join(""))},writeln:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i(e.join("")+"\n")}});var d=f.win.onerror||o;return f.win.onerror=function(t,e,i){n.error({msg:t+" - "+e+": "+i}),d.apply(f.win,[t,e,i])},f.write(e,function(){Object.assign(r,l),f.win.onerror=d,n.done(),f=null,a()}),f}function s(t,e,n){if(u.isFunction(n))n={done:n};else if("clear"===n)return m=[],f=null,void(p=0);n=u.defaults(n,h),t=/^#/.test(t)?window.document.getElementById(t.substr(1)):t.jquery?t[0]:t;var i=[t,e,n];return t.postscribe={cancel:function(){i.stream?i.stream.abort():i[1]=o}},n.beforeEnqueue(i),m.push(i),f||a(),t.postscribe}Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var l=n(2),c=function(t){return t&&t.__esModule?t:{default:t}}(l),d=n(4),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(d),h={afterAsync:o,afterDequeue:o,afterStreamStart:o,afterWrite:o,autoFix:!0,beforeEnqueue:o,beforeWriteToken:function(t){return t},beforeWrite:function(t){return t},done:o,error:function(t){throw new Error(t.msg)},releaseAsync:!1},p=0,m=[],f=null;Object.assign(s,{streams:{},queue:m,WriteStream:c.default})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var n=u+e,i=t.getAttribute(n);return d.existy(i)?String(i):i}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=u+e;d.existy(n)&&""!==n?t.setAttribute(i,n):t.removeAttribute(i)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(3),l=function(t){return t&&t.__esModule?t:{default:t}}(s),c=n(4),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(c),u="data-ps-",h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.root=e,this.options=n,this.doc=e.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new l.default("",{autoFix:n.autoFix}),this.actuals=[e],this.proxyHistory="",this.proxyRoot=this.doc.createElement(e.nodeName),this.scriptStack=[],this.writeQueue=[],a(this.proxyRoot,"proxyof",0)}return r(t,[{key:"write",value:function(){var t;for((t=this.writeQueue).push.apply(t,arguments);!this.deferredRemote&&this.writeQueue.length;){var e=this.writeQueue.shift();d.isFunction(e)?this._callFunction(e):this._writeImpl(e)}}},{key:"_callFunction",value:function(t){var e={type:"function",value:t.name||t.toString()};this._onScriptStart(e),t.call(this.win,this.doc),this._onScriptDone(e)}},{key:"_writeImpl",value:function(t){this.parser.append(t);for(var e=void 0,n=void 0,i=void 0,o=[];(e=this.parser.readToken())&&!(n=d.isScript(e))&&!(i=d.isStyle(e));)(e=this.options.beforeWriteToken(e))&&o.push(e);o.length>0&&this._writeStaticTokens(o),n&&this._handleScriptToken(e),i&&this._handleStyleToken(e)}},{key:"_writeStaticTokens",value:function(t){var e=this._buildChunk(t);return e.actual?(e.html=this.proxyHistory+e.actual,this.proxyHistory+=e.proxy,this.proxyRoot.innerHTML=e.html,this._walkChunk(),e):null}},{key:"_buildChunk",value:function(t){for(var e=this.actuals.length,n=[],i=[],o=[],a=t.length,r=0;r<a;r++){var s=t[r],l=s.toString();if(n.push(l),s.attrs){if(!/^noscript$/i.test(s.tagName)){var c=e++;i.push(l.replace(/(\/?>)/," "+u+"id="+c+" $1")),"ps-script"!==s.attrs.id&&"ps-style"!==s.attrs.id&&o.push("atomicTag"===s.type?"":"<"+s.tagName+" "+u+"proxyof="+c+(s.unary?" />":">"))}}else i.push(l),o.push("endTag"===s.type?l:"")}return{tokens:t,raw:n.join(""),actual:i.join(""),proxy:o.join("")}}},{key:"_walkChunk",value:function(){for(var t=void 0,e=[this.proxyRoot];d.existy(t=e.shift());){var n=1===t.nodeType;if(!(n&&o(t,"proxyof"))){n&&(this.actuals[o(t,"id")]=t,a(t,"id"));var i=t.parentNode&&o(t.parentNode,"proxyof");i&&this.actuals[i].appendChild(t)}e.unshift.apply(e,d.toArray(t.childNodes))}}},{key:"_handleScriptToken",value:function(t){var e=this,n=this.parser.clear();n&&this.writeQueue.unshift(n),t.src=t.attrs.src||t.attrs.SRC,(t=this.options.beforeWriteToken(t))&&(t.src&&this.scriptStack.length?this.deferredRemote=t:this._onScriptStart(t),this._writeScriptToken(t,function(){e._onScriptDone(t)}))}},{key:"_handleStyleToken",value:function(t){var e=this.parser.clear();e&&this.writeQueue.unshift(e),t.type=t.attrs.type||t.attrs.TYPE||"text/css",t=this.options.beforeWriteToken(t),t&&this._writeStyleToken(t),e&&this.write()}},{key:"_writeStyleToken",value:function(t){var e=this._buildStyle(t);this._insertCursor(e,"ps-style"),t.content&&(e.styleSheet&&!e.sheet?e.styleSheet.cssText=t.content:e.appendChild(this.doc.createTextNode(t.content)))}},{key:"_buildStyle",value:function(t){var e=this.doc.createElement(t.tagName);return e.setAttribute("type",t.type),d.eachKey(t.attrs,function(t,n){e.setAttribute(t,n)}),e}},{key:"_insertCursor",value:function(t,e){this._writeImpl('<span id="'+e+'"/>');var n=this.doc.getElementById(e);n&&n.parentNode.replaceChild(t,n)}},{key:"_onScriptStart",value:function(t){t.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(t)}},{key:"_onScriptDone",value:function(t){if(t!==this.scriptStack[0])return void this.options.error({msg:"Bad script nesting or script finished twice"});this.scriptStack.shift(),this.write.apply(this,t.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)}},{key:"_writeScriptToken",value:function(t,e){var n=this._buildScript(t),i=this._shouldRelease(n),o=this.options.afterAsync;t.src&&(n.src=t.src,this._scriptLoadHandler(n,i?o:function(){e(),o()}));try{this._insertCursor(n,"ps-script"),n.src&&!i||e()}catch(t){this.options.error(t),e()}}},{key:"_buildScript",value:function(t){var e=this.doc.createElement(t.tagName);return d.eachKey(t.attrs,function(t,n){e.setAttribute(t,n)}),t.content&&(e.text=t.content),e}},{key:"_scriptLoadHandler",value:function(t,e){function n(){t=t.onload=t.onreadystatechange=t.onerror=null}function i(){n(),null!=e&&e(),e=null}function o(t){n(),r(t),null!=e&&e(),e=null}function a(t,e){var n=t["on"+e];null!=n&&(t["_on"+e]=n)}var r=this.options.error;a(t,"load"),a(t,"error"),Object.assign(t,{onload:function(){if(t._onload)try{t._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){o({msg:"onload handler failed "+e+" @ "+t.src})}i()},onerror:function(){if(t._onerror)try{t._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){return void o({msg:"onerror handler failed "+e+" @ "+t.src})}o({msg:"remote script failed "+t.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(t.readyState)&&i()}})}},{key:"_shouldRelease",value:function(t){return!/^script$/i.test(t.nodeName)||!!(this.options.releaseAsync&&t.src&&t.hasAttribute("async"))}}]),t}();e.default=h},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i=n(1),o=function(t){return t&&t.__esModule?t:{default:t}}(i);t.exports=o.default},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=n(2),r=i(a),s=n(3),l=i(s),c=n(6),d=function(t){return t&&t.__esModule?t:{default:t}}(c),u=n(5),h={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},p=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),this.stream=n;var a=!1,s={};for(var l in r)r.hasOwnProperty(l)&&(i.autoFix&&(s[l+"Fix"]=!0),a=a||s[l+"Fix"]);a?(this._readToken=(0,d.default)(this,s,function(){return e._readTokenImpl()}),this._peekToken=(0,d.default)(this,s,function(){return e._peekTokenImpl()})):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return t.prototype.append=function(t){this.stream+=t},t.prototype.prepend=function(t){this.stream=t+this.stream},t.prototype._readTokenImpl=function(){var t=this._peekTokenImpl();if(t)return this.stream=this.stream.slice(t.length),t},t.prototype._peekTokenImpl=function(){for(var t in h)if(h.hasOwnProperty(t)&&h[t].test(this.stream)){var e=l[t](this.stream);if(e)return"startTag"===e.type&&/script|style/i.test(e.tagName)?null:(e.text=this.stream.substr(0,e.length),e)}},t.prototype.peekToken=function(){return this._peekToken()},t.prototype.readToken=function(){return this._readToken()},t.prototype.readTokens=function(t){for(var e=void 0;e=this.readToken();)if(t[e.type]&&t[e.type](e)===!1)return},t.prototype.clear=function(){var t=this.stream;return this.stream="",t},t.prototype.rest=function(){return this.stream},t}();e.default=p,p.tokenToString=function(t){return t.toString()},p.escapeAttributes=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=(0,u.escapeQuotes)(t[n],null));return e},p.supports=r;for(var m in r)r.hasOwnProperty(m)&&(p.browserHasFlaw=p.browserHasFlaw||!r[m]&&m)},function(t,e){"use strict";e.__esModule=!0;var n=!1,i=!1,o=window.document.createElement("div");try{var a="<P><I></P></I>";o.innerHTML=a,e.tagSoup=n=o.innerHTML!==a}catch(t){e.tagSoup=n=!1}try{o.innerHTML="<P><i><P></P></i></P>",e.selfClose=i=2===o.childNodes.length}catch(t){e.selfClose=i=!1}o=null,e.tagSoup=n,e.selfClose=i},function(t,e,n){"use strict";function i(t){var e=t.indexOf("-->");if(e>=0)return new c.CommentToken(t.substr(4,e-1),e+3)}function o(t){var e=t.indexOf("<");return new c.CharsToken(e>=0?e:t.length)}function a(t){if(t.indexOf(">")!==-1){var e=t.match(d.startTag);if(e){var n=function(){var t={},n={},i=e[2];return e[2].replace(d.attr,function(e,o){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",n[arguments[5]]=!0):t[o]=arguments[2]||arguments[3]||arguments[4]||d.fillAttr.test(o)&&o||"":t[o]="",i=i.replace(e,"")}),{v:new c.StartTagToken(e[1],e[0].length,t,n,!!e[3],i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))}}();if("object"===(void 0===n?"undefined":l(n)))return n.v}}}function r(t){var e=a(t);if(e){var n=t.slice(e.length);if(n.match(new RegExp("</\\s*"+e.tagName+"\\s*>","i"))){var i=n.match(new RegExp("([\\s\\S]*?)</\\s*"+e.tagName+"\\s*>","i"));if(i)return new c.AtomicTagToken(e.tagName,i[0].length+e.length,e.attrs,e.booleanAttrs,i[1])}}}function s(t){var e=t.match(d.endTag);if(e)return new c.EndTagToken(e[1],e[0].length)}e.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.comment=i,e.chars=o,e.startTag=a,e.atomicTag=r,e.endTag=s;var c=n(4),d={startTag:/^<([\-A-Za-z0-9_!:]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_:]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.EndTagToken=e.AtomicTagToken=e.StartTagToken=e.TagToken=e.CharsToken=e.CommentToken=e.Token=void 0;var o=n(5),a=(e.Token=function t(e,n){i(this,t),this.type=e,this.length=n,this.text=""},e.CommentToken=function(){function t(e,n){i(this,t),this.type="comment",this.length=n||(e?e.length:0),this.text="",this.content=e}return t.prototype.toString=function(){return"<!--"+this.content},t}(),e.CharsToken=function(){function t(e){i(this,t),this.type="chars",this.length=e,this.text=""}return t.prototype.toString=function(){return this.text},t}(),e.TagToken=function(){function t(e,n,o,a,r){i(this,t),this.type=e,this.length=o,this.text="",this.tagName=n,this.attrs=a,this.booleanAttrs=r,this.unary=!1,this.html5Unary=!1}return t.formatTag=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="<"+t.tagName;for(var i in t.attrs)if(t.attrs.hasOwnProperty(i)){n+=" "+i;var a=t.attrs[i];void 0!==t.booleanAttrs&&void 0!==t.booleanAttrs[i]||(n+='="'+(0,o.escapeQuotes)(a)+'"')}return t.rest&&(n+=" "+t.rest),n+=t.unary&&!t.html5Unary?"/>":">",void 0!==e&&null!==e&&(n+=e+"</"+t.tagName+">"),n},t}());e.StartTagToken=function(){function t(e,n,o,a,r,s){i(this,t),this.type="startTag",this.length=n,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=a,this.html5Unary=!1,this.unary=r,this.rest=s}return t.prototype.toString=function(){return a.formatTag(this)},t}(),e.AtomicTagToken=function(){function t(e,n,o,a,r){i(this,t),this.type="atomicTag",this.length=n,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=a,this.unary=!1,this.html5Unary=!1,this.content=r}return t.prototype.toString=function(){return a.formatTag(this,this.content)},t}(),e.EndTagToken=function(){function t(e,n){i(this,t),this.type="endTag",this.length=n,this.text="",this.tagName=e}return t.prototype.toString=function(){return"</"+this.tagName+">"},t}()},function(t,e){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?t.replace(/([^"]*)"/g,function(t,e){return/\\/.test(e)?e+'"':e+'\\"'}):e}e.__esModule=!0,e.escapeQuotes=n},function(t,e){"use strict";function n(t){return t&&"startTag"===t.type&&(t.unary=s.test(t.tagName)||t.unary,t.html5Unary=!/\/>$/.test(t.text)),t}function i(t,e){var i=t.stream,o=n(e());return t.stream=i,o}function o(t,e){var n=e.pop();t.prepend("</"+n.tagName+">")}function a(){var t=[];return t.last=function(){return this[this.length-1]},t.lastTagNameEq=function(t){var e=this.last();return e&&e.tagName&&e.tagName.toUpperCase()===t.toUpperCase()},t.containsTagName=function(t){for(var e,n=0;e=this[n];n++)if(e.tagName===t)return!0;return!1},t}function r(t,e,r){function s(){var e=i(t,r);e&&d[e.type]&&d[e.type](e)}var c=a(),d={startTag:function(n){var i=n.tagName;"TR"===i.toUpperCase()&&c.lastTagNameEq("TABLE")?(t.prepend("<TBODY>"),s()):e.selfCloseFix&&l.test(i)&&c.containsTagName(i)?c.lastTagNameEq(i)?o(t,c):(t.prepend("</"+n.tagName+">"),s()):n.unary||c.push(n)},endTag:function(n){c.last()?e.tagSoupFix&&!c.lastTagNameEq(n.tagName)?o(t,c):c.pop():e.tagSoupFix&&(r(),s())}};return function(){return s(),n(r())}}e.__esModule=!0,e.default=r;var s=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,l=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])})},function(t,e){"use strict";function n(t){return void 0!==t&&null!==t}function i(t){return"function"==typeof t}function o(t,e,n){var i=void 0,o=t&&t.length||0;for(i=0;i<o;i++)e.call(n,t[i],i)}function a(t,e,n){for(var i in t)t.hasOwnProperty(i)&&e.call(n,i,t[i])}function r(t,e){return t=t||{},a(e,function(e,i){n(t[e])||(t[e]=i)}),t}function s(t){try{return Array.prototype.slice.call(t)}catch(n){var e=function(){var e=[];return o(t,function(t){e.push(t)}),{v:e}}();if("object"===(void 0===e?"undefined":h(e)))return e.v}}function l(t){return t[t.length-1]}function c(t,e){return!(!t||"startTag"!==t.type&&"atomicTag"!==t.type||!("tagName"in t))&&!!~t.tagName.toLowerCase().indexOf(e)}function d(t){return c(t,"script")}function u(t){return c(t,"style")}Object.defineProperty(e,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.existy=n,e.isFunction=i,e.each=o,e.eachKey=a,e.defaults=r,e.toArray=s,e.last=l,e.isTag=c,e.isScript=d,e.isStyle=u}])})},{}],2:[function(t,e,n){function i(t){return t&&"function"==typeof t.then}function o(t,e){t.then(null,e)}function a(t){function e(t,e){if(c.a=d,c.v=t,c.s=e,e===l&&!c.c[e].length)throw t;c.c[e].forEach(function(e){e(t)}),c.c=null}function n(t){c.c&&(i(t)?o(t.then(n),a):e(t,s))}function a(t){c.c&&(i(t)?o(t.then(a),a):e(t,l))}var c=this;c.v=0,c.s=r,c.c=[[],[]],c.a=!1;var d=!0;t(n,a),d=!1}var r=2,s=0,l=1,c=a.prototype;c.then=function(t,e){var n=this;if(n.a)throw new Error("Cannot call `then` on synchronously resolved promise");return new a(function(i,o){function a(){try{i(t?t(n.v):n.v)}catch(t){r(t)}}var r="function"==typeof e?e:o;n.s===s?a():n.s===l?r(n.v):(n.c[s].push(a),n.c[l].push(r))})},c.catch=function(t){var e=this;if(e.a)throw new Error("Cannot call `catch` on synchronously resolved promise");return new a(function(n,i){function o(){try{n(t(e.v))}catch(t){i(t)}}e.s===l?o():e.s===s?n(e.v):(e.c[l].push(o),e.c[s].push(n))})},a.all=function(t){return new a(function(e,n,a){a=t.length;var r=!1;t.forEach(function(s,l){i(s)?(r=!0,o(s.then(function(n){t[l]=n,--a||e(t)}),n)):--a||(r?e(t):function(){throw new Error("Must use at least one promise within `SyncPromise.all`")}())})})},a.race=function(t){var e=!1;return new a(function(n,a){t.some(function(t,r){if(!i(t))throw new Error("Must use promises within `SyncPromise.race`");o(t.then(function(t){e||(n(t),e=!0)}),a)})})},e.exports=a},{}],3:[function(t,e,n){"use strict";function i(t){return"https://"===(t||window.location.href).toLowerCase().substr(0,8)}function o(t){return i(t)?t:t.replace("http://","https://")}function a(t){switch(t){case"min":console.warn("Minimal auto reload time is 10 seconds. Automatically setting timer to 10 seconds");break;case"max":console.warn("Maximal auto reload time is 240 seconds. Automatically setting timer to 240 seconds");break;case"num":console.warn("reload/refresh value cannot be String. Please provide a numeric value between 10 and 240 to reload.")}}function r(t){for(var e=[t.autoReload,t.autoRefresh,t.autorefresh,t.autoreload],n=0;n<e.length;n++)if(e[n])return e[n]}var s,l=t("../constants"),c=t("../helpers/session"),d=t("../helpers/common"),u=t("../helpers/somaQuery"),h=t("./vast"),p="",m=1,f=function(t,e,n,f){var v=new c;this.handleCRTUSData=function(t){"OK"===t.status&&(SomaJS.cRTUS=t.userid),SomaJS.createCookieOneHour("crtus",t.userid)};var g=this.makeHTTPSIfNeeded=function(t){return void 0===s?i()?o(t):t:s?o(t):t},y=this.checkNotNull=d.checkNotNull,b=(this.readCookie=function(t){return v.readCookie(t)},this.isCookiePresent=function(t){return v.isCookiePresent(t)},this.createCookieOneHour=function(t,e){v.createCookieOneHour(t,e)},this.presentModal=function(n){if(t[n].modalDisplay===!0&&t[n].shouldCacheModal===!0&&t[n].lastAd!==!1&&SomaJS.checkNotNull(t[n].lastAd)===!0){var i=t[n].lastAd;"IMG"===i.type?e.displayImageAd(i):"TXT"===i.type?e.displayTextAd(i):"RICHMEDIA"===i.type&&e.displayRichMediaAd(i),t[n].lastAd=!1}},function(t,e){t+="&response=JSONP";var n=document.createElement("script");return n.src=t,document.getElementById(e).appendChild(n),t}),w=function(t){t+="&response=JSON",d.makeRequest({method:"GET",url:t,sync:!0}).then(function(t){var n;n=t?JSON.parse(t):{status:"ERROR"},e.displayAd(n)}).catch(function(t){console.error("Augh, there was an error!",t.statusText)})},_=function(t,e){var n=new h(e);n.adDivId=t.adDivId,n.loadCallback=function(e){e&&(n.isInLine=!!t.inlineVideo,t.inlineVideo===!0?n.showInline(t.adDivId):n.show()),p(!!e)},n.load()},k=function(t,e){var n=this,i=g(l.OUTSTREAM.URL),o=t.outstreamSelectors;if(!Array.isArray(o))return void console.error("this.load >> outstreamSelectors param not set.");if(m=1,"function"!=typeof SmaatoOutStream){var a=document.createElement("script");a.setAttribute("src",i),document.body.appendChild(a),a.addEventListener("load",function(){x.call(n,o,e)})}else x(o,e)},x=function(t,e){m=new SmaatoOutStream({selectors:t,osIncludes:{css:g(l.OUTSTREAM.CSS),iosInlineVideo:g(l.OUTSTREAM.IOS_INLINE_VIDEO)},vast:e,replayButton:!1,muteButton:"bl",progressBar:!0,vpaidTimeOut:3e4,smaatoCallback:p})};this.loadAd=function(e,i){window.somaLastCallback||(window.somaLastCallback=i),null===document.body&&(document.body=document.createElement("body")),p=i,s=e.secure,e.baseUrl=SomaJS.apiBaseURL||g(l.SOMA_BASE_URL);var o=u.createQuery(e,i,t,n,v),c=o.adRequest,d=o.videotype;if(v=o.session,y(e.autoReload)){var h=r(e);if(a(h>0&&h<10?"min":h>240?"max":"string"==typeof e.autoReload?"num":null),!(h=h>0&&h<10?10:h>240?240:h))return;setTimeout(function(){SomaJS.loadAd(e,i)},1e3*h)}void 0!==e.passback&&e.passback.length>0&&console.warn("The passback function is deprecated, please use SPX for passing back unfilled ad requests"),d&&"outstream"===d&&k(e,c),d&&"outstream"!==d&&_(e,c),!d&&e.sync&&w(c),d||e.sync||b(c,e.adDivId)}};e.exports=f},{"../constants":6,"../helpers/common":7,"../helpers/session":8,"../helpers/somaQuery":10,"./vast":5}],4:[function(t,e,n){"use strict";var i=t("../constants"),o=t("../helpers/common"),a=t("postscribe-fb"),r=t("../helpers/smaatoFrame"),s=!1,l=function(t,e,n){function l(e,n,i){if(e){var o=64;e.style.fontSize=o+"px";var a=e.offsetWidth+1,r=i;t[n].modalDisplay===!0&&(r=this.maximumModalWidth(n)-20);for(;a>r;)o-=1,e.style.fontSize=o+"px",a=e.offsetWidth;e.style.fontSize=o-2+"px"}}function c(t){return t.replace(/\<(\?xml|(\!DOCTYPE[^\>\[]+(\[[^\]]+)?))+[^>]+\>/g,"")}function d(t,e){for(var n=e.length,i=0;i<n;++i){var o=document.createElement("img");o.setAttribute("alt",""),o.setAttribute("width","1px"),o.setAttribute("height","1px"),o.style.display="none",o.src=e[i],t.appendChild(o)}}var u={error:function(t){console.warn("Error in the RichMedia Creative",t)}},h=this.showModal=function(e){if(s===!1){s=!0;var n=SomaJS.cssFile||SomaJS.makeHTTPSIfNeeded(i.ADTAG.CSS),a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",n),document.getElementsByTagName("head")[0].appendChild(a)}var r=document.getElementById("smaato_modalAd");if(r){r.innerHTML="";var l=r.parentElement;l&&l.removeChild(r)}var c="TXT"===t[e].adType?"smaato_modalDialog_Gradient":"",d="RICHMEDIA"===t[e].adType?"":" onClick=\"smaato_hide_modal('"+e+"')\" ",u='<div id="smaato_modalAd" class="smaato_modalDialog"> <div id="smaato_modal_container" class="'+c+'" '+d+'><span id="_smaato_closeButton" onClick="smaato_hide_modal(\''+e+'\')" title="Close" class="smaato_close">X</span></div></div>',h=document.createElement("div");h.innerHTML=u;var p=h.firstChild;document.body.appendChild(p);var m=document.getElementById("smaato_modal_container"),f=o.getDimensionSize(t[e].dimension);m.style.width=f.width+"px",m.style.height=f.height+"px"};this.maximumModalWidth=function(e){return t[e].width?t[e].width:o.getDimensionSize(t[e].dimension).width};var p=this.displayImageAd=function(n){var i=document.createElement("a");i.href=n.target,i.rel="external",i.target="_blank";var o=document.createElement("img");o.src=n.link;var a=n.width;SomaJS.checkNotNull(a)&&(o.style.width=a);var r=n.height;if(SomaJS.checkNotNull(r)&&(o.style.height=r),null!==t[n.divid]&&null!==t[n.divid].modalDisplay&&t[n.divid].modalDisplay===!0)t[n.divid].shouldShowModalCallback!==!1&&t[n.divid].shouldShowModalCallback()!==!0||o.addEventListener("load",function(t){h(n.divid),e="smaato_modal_container";var a=document.getElementById(e);a.style["text-align"]="center",i.appendChild(o),a.appendChild(i),d(a,n.beacons)});else{for(var s=document.getElementById(n.divid);s.hasChildNodes();)s.removeChild(s.lastChild);s.style["text-align"]="center",i.appendChild(o),s.appendChild(i),d(s,n.beacons)}},m=this.displayTextAd=function(n){var i,a=document.createElement("style"),r=document.createElement("div");if(r.className="textBannerHidden",r.innerHTML=n.text,r.onclick=function(){window.open(n.target,"_blank")},a.type="text/css",null!==t[n.divid]&&null!==t[n.divid].modalDisplay&&t[n.divid].modalDisplay===!0){if(t[n.divid].shouldShowModalCallback&&t[n.divid].shouldShowModalCallback()===!0){i=document.createElement("div"),i.style.padding="0px",document.body.appendChild(i),a.innerHTML="div.textBanner {\nwhite-space: nowrap;\nmargin: 0px;\npadding: 0px;\nbackground: #f2f5f0; /* Old browsers */\nbackground: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f2f5f0), color-stop(18%,#e9ece7), color-stop(71%,#bdc1bb), color-stop(94%,#aeb2ab), color-stop(100%,#acb0a9)); /* Chrome,Safari4+ */\nbackground: -webkit-linear-gradient(top, #f2f5f0 0%,#e9ece7 18%,#bdc1bb 71%,#aeb2ab 94%,#acb0a9 100%); /* Chrome10+,Safari5.1+ */\nbackground: linear-gradient(top, #f2f5f0 0%,#e9ece7 18%,#bdc1bb 71%,#aeb2ab 94%,#acb0a9 100%); /* W3C */\n}\ndiv.textBannerHidden {\n opacity:0; position: absolute;\nwhite-space: nowrap;\nmargin: 0px;\npadding: 0px;\n}",i.appendChild(a),i.appendChild(r),l(r,n.divid,window.innerWidth),h(n.divid),e="smaato_modal_container";var s=document.getElementById(e);d(s,n.beacons),r.className="smaatoElement",s.appendChild(r);var c=i.parentElement;c&&c.removeChild(i)}}else{i=document.getElementById(n.divid),i.innerHTML="",a.innerHTML="div.smaatoContainer {\nwhite-space: nowrap;\nmargin: 0px;\npadding: 0px;\nbackground: #f2f5f0; /* Old browsers */\nbackground: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f2f5f0), color-stop(18%,#e9ece7), color-stop(71%,#bdc1bb), color-stop(94%,#aeb2ab), color-stop(100%,#acb0a9)); /* Chrome,Safari4+ */\nbackground: -webkit-linear-gradient(top, #f2f5f0 0%,#e9ece7 18%,#bdc1bb 71%,#aeb2ab 94%,#acb0a9 100%); /* Chrome10+,Safari5.1+ */\nbackground: linear-gradient(top, #f2f5f0 0%,#e9ece7 18%,#bdc1bb 71%,#aeb2ab 94%,#acb0a9 100%); /* W3C */\n}\ndiv.textBannerHidden {\n opacity:0; position: absolute;\nwhite-space: nowrap;\nmargin: 0px;\npadding: 0px;\n}",i.appendChild(a);var u=document.createElement("style");u.type="text/css",u.innerHTML="div.smaatoTextBanner {position: relative;top: 50%;-webkit-transform: translateY(-50%);-ms-transform: translateY(-50%);transform: translateY(-50%);text-align: center;white-space: nowrap;\n}",i.appendChild(u);var p=document.createElement("div"),m=o.getDimensionSize(t[n.divid].dimension);0===m.width&&(m.width=i.style.width,m.height=i.style.height),p.style.width=m.width,p.style.height=m.height,p.appendChild(r),p.className="smaatoContainer",i.appendChild(p),l(r,n.divid,parseInt(p.style.width)),r.className="smaatoTextBanner",d(p,n.beacons)}},f=this.displayRichMediaAd=function(n){var i=document.getElementById(n.divid);if(null!==t[n.divid]&&null!==t[n.divid].modalDisplay&&t[n.divid].modalDisplay===!0)t[n.divid].shouldShowModalCallback&&t[n.divid].shouldShowModalCallback()===!0?(h(n.divid),e="smaato_modal_container",i=document.getElementById(e)):i=null;else if(null!==i)for(;i.hasChildNodes();)i.removeChild(i.lastChild);return null!==i&&null!==n.mediadata&&(d(i,n.beacons),t[n.divid].smaatoFrame?new r(i.id,n.mediadata):a("#"+i.id,c(n.mediadata),u),!0)};this.displayAd=function(e){if("ERROR"!==e.status){try{t[e.divid].lastAd=e,t[e.divid].callback(e.status)}catch(t){}null!==e.divid&&null!==e.type&&null!==t[e.divid]&&null!==t[e.divid].adType&&(t[e.divid].adType=e.type),null!==t[e.divid]&&null!==t[e.divid].shouldCacheModal&&t[e.divid].shouldCacheModal===!0?t[e.divid].lastAd=e:"IMG"===e.type?p(e):"TXT"===e.type?m(e):"RICHMEDIA"===e.type&&f(e)}else{try{t[e.divid].lastAd=!1}catch(t){}try{try{t[e.divid].callback(e.status)}catch(t){void 0!==window.somaLastCallback&&window.somaLastCallback(e.status)}n&&a("#"+e.divid,c(n),u)}catch(t){console.error("CallBack function failed "+t)}}}};e.exports=l},{"../constants":6,"../helpers/common":7,"../helpers/smaatoFrame":9,"postscribe-fb":1}],5:[function(t,e,n){"use strict";var i=t("../helpers/common"),o=function(t){function e(t){if(t)for(var e=0;e<t.length;e++)this.callTrackingURL(t[e])}function n(){e.call(this,this.trackingEvents.impression),e.call(this,this.trackingEvents.creativeView)}function o(){var t=this;this.isVisible&&(this.hide(!0),this.videoClickThroughURLList.length>0&&(window.open(this.videoClickThroughURLList[0]),this.videoClickTrackingURLList.forEach(function(e){t.callTrackingURL(e)})))}function a(){var t=l.duration,e=l.currentTime,n=Math.floor(e/t*100/25),i=["start","firstQuartile","midpoint","thirdQuartile"],o=i[n];this.fireTrackingEvent(o)}function r(t,e){this.isVisible&&(e?window.open(t.clickThrough):this.callTrackingURL(t.clickThrough),this.hide())}function s(t){var e=this;t.load(),t.play(),t.addEventListener("click",function(){o.call(e)}),t.onended=function(t){e.fireTrackingEvent("complete"),e.hide()},t.ontimeupdate=function(){a.call(e)}}this.url=t;var l=(this.isIEParser=!1,this.xpathImpression="/VAST//Impression",this.xpathMediaFiles="/VAST//Linear//MediaFile",this.xpathDuration="/VAST//Linear//Duration",this.xpathTrackingEventURL="/VAST//Linear//TrackingEvents/Tracking",this.xpathTrackingEventsTime="/VAST//Linear//TrackingEvents/Tracking/@event",this.xpathVideoClickThroughURL="/VAST//Linear//VideoClicks/ClickThrough",this.xpathVideoClickTracking="/VAST//Linear//VideoClicks/ClickTracking",this.xpathWrapper="/VAST//Wrapper/VASTAdTagURI",this.xpathCompanionAd="/VAST//InLine//CompanionAds/Companion",this.xpathBeacon="//beacon",this.mediaFiles=[],this.duration=null,this.trackingEvents={},this.videoClickThroughURLList=[],this.videoClickTrackingURLList=[],this.beacons=[],this.videoPlayer=function(){return document.getElementById("_smaato_vast_video_Player")});this.closeButton=function(){return document.getElementById("_smaato_vast_close")},this.isVisible=!1,this.isAdAvailable=!1,this.isSkippable=!1,this.companionAds=[],this.reset=function(){this.mediaFiles=[],this.duration=null,this.trackingEvents={},this.videoClickThroughURLList=[],this.videoClickTrackingURLList=[],this.beacons=[],this.isVisible=!1,this.isAdAvailable=!1,this.isSkippable=!1,this.skipButtonTimer=void 0},this.initialize=function(){var t=this;this.reset();if(!document.getElementById("__SMAATO_CSS_VAST__")){var e=document.createElement("style");e.type="text/css",e.id="__SMAATO_CSS_VAST__",e.innerHTML=this.popupCSS,
document.getElementsByTagName("head")[0].appendChild(e)}if(!document.getElementById("__smaato_vast_div__")){var n=document.createElement("div");n.id="__smaato_vast_div__",n.className="_smaato_modal",n.innerHTML=this.popupHTML,document.body.appendChild(n),this.closeButton().addEventListener("click",function(){t.isSkippable&&t.hide()})}},this.showInline=function(){var t=document.getElementById(this.adDivId);if(t){this.isVisible=!0,t.innerHTML="";var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.position="relative",t.appendChild(e);var i=this;n.call(this);var o=document.createElement("video");o.style.height="100%",o.style.width="100%",o.autoplay=!0,o.controls=!0,o.style.backgroundColor="#000000",e.appendChild(o),o.innerHTML="Your browser does not support HTML5 video.",this.mediaFiles.forEach(function(t){var e=document.createElement("source");e.src=t.url,e.type=t.type,o.appendChild(e),i.isVisible=!0}),s.call(this,o);var a=document.createElement("div");a.style.bottom="0px",a.style.position="absolute",a.style.width=t.style.width,a.style.height=t.style.height}},this.show=function(){if(this.isAdAvailable){this.firefoxVideoPlayerCurrentTimeFlag=!1;var t=document.getElementById("__smaato_vast_modal__");if(t){var e=this;t.className="_smaato_modal__overlay_visible",n.call(this);var i=this.videoPlayer();i.innerHTML="Your browser does not support HTML5 video.",this.mediaFiles.forEach(function(t){var n=document.createElement("source");n.src=t.url,n.type=t.type;var o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;i.width=o<t.width?o-30:t.width,i.appendChild(n),e.isVisible=!0}),s.call(this,i);var o=document.getElementById("_smaato_vast_close");o.style.display="none",o.addEventListener("click",function(){e.isSkippable&&e.hide()}),i.onplaying=function(){if(!e.skipButtonTimer){if(i.duration<30)return void(this.isSkippable=!1);o.style.display="inline";var t=0;this.isSkippable=!1;!function n(){o.textContent=15-t,t++,t<16?e.skipButtonTimer=setTimeout(n,1e3):(o.textContent="X",e.isSkippable=!0)}()}};var a=document.getElementById("_smaato_vast_companion_ad_");this.createCompanionElement(a),this.willShowCallback&&this.willShowCallback()}}},this.createCompanionElement=function(t){t.innerHTML="";var e,n,i=this;if(0===this.companionAds.length)return t.style.height="0px",t.style.width="0px",void(t.innerHTML="");var o=this.companionAds[0];switch(o.resourceType.toLowerCase()){case"staticresource":n=document.createElement("img"),n.src=o.resourceValue,n.onclick=function(){r.call(i,o,!0)};break;case"htmlresource":n=document.createElement("div"),n.innerHTML=o.resourceValue,n.onclick=function(){r.call(i,o)};break;case"iframeresource":n=document.createElement("IFRAME"),n.frameBorder=0,n.setAttribute("src",o.resourceValue),n.onclick=function(){r.call(i,o)}}n.style.height=o.height+"px",n.style.width=o.width+"px",e=n,t.appendChild(n);var a=t.style.width,s=t.style.height;SomaJS.checkNotNull(a)?(parseInt(e.style.width)>parseInt(a)&&(e.style.width=a),parseInt(e.style.height)>parseInt(s)&&(e.style.height=s+"px")):(t.style.height=o.height+"px",t.style.width=o.width+"px")},this.hide=function(t){if(clearTimeout(this.skipButtonTimer),!this.isInLine){this.isVisible=!1,this.isAdAvailable=!1;var e=document.getElementById("__smaato_vast_modal__");if(e){e.className="_smaato_modal__overlay";var n=this.videoPlayer();n.pause(),n.innerHTML="Your browser does not support HTML5 video.",this.fireTrackingEvent("close");var i=t===!0,o=this;setTimeout(function(){o.didHideCallback&&o.didHideCallback(i)},300)}}},this.fireTrackingEvent=function(t){var e=this.trackingEvents[t],n=this;e&&e.length>0&&e.forEach(function(t){n.callTrackingURL(t)}),this.trackingEvents[t]=[]},this.parseFinished=function(){this.mediaFiles.length>0&&(this.isAdAvailable=!0),this.loadCallback&&this.loadCallback(this.isAdAvailable)},this.load=function(t){t||(t=this.url,this.initialize());var e=this;i.makeRequest({method:"GET",url:t,xml:!0}).then(function(t){e.parse(t)}).catch(function(t){e.loadCallback(!1)})},this.callTrackingURL=function(t){if(t&&!(t.length<3)){(new Image).src=t}},this.parse=function(t){var e=t;try{this.parseMediaFiles(e),this.parseDuration(e),this.parseTrackingEvents(e),this.parseImpressions(e),this.parseVideoClickThroughURL(e),this.parseBeacons(e),this.parseVideoClickTrackingURL(e),this.parseCompanionAds(e),this.parseWrapper(e)}catch(t){this.loadCallback(!1)}},this.parseImpressions=function(t){var e=this.runXpath(t,this.xpathImpression);this.trackingEvents.impression||(this.trackingEvents.impression=[]);for(var n=0;n<e.length;n++)this.trackingEvents.impression.push(e[n])},this.parseCompanionAds=function(t){for(var e=this.xpathCompanionAd,n=[],i=t.evaluate(e,t,null,XPathResult.ANY_TYPE,null),o=i.iterateNext();o;){for(var a={resourceType:"unknown",creativeType:"unknown"},r=o.attributes?o.attributes:[],s=0;s<r.length;s++)a[r.item(s).nodeName]=r.item(s).nodeValue;for(var l=o.children?o.children:[],c=0;c<l.length;c++){var d=l[c];if("staticresource"!==d.nodeName.toLowerCase()&&"htmlresource"!==d.nodeName.toLowerCase()&&"iframeresource"!==d.nodeName.toLowerCase()||(a.resourceType=d.nodeName.toLowerCase(),a.resourceValue=d.textContent.trim(),d.attributes.length>0&&(a.creativeType=d.attributes.item(0).nodeValue)),"companionclickthrough"===d.nodeName.toLowerCase()&&(a.clickThrough=d.textContent.trim()),"trackingevents"===d.nodeName.toLowerCase()){for(var u=d.children?d.children:[],h=[],p=0;p<u.length;p++){var m=u[p];h.push(m.textContent.trim())}a.events=h}}"htmlresource"!==a.resourceType.toLowerCase()&&"iframeresource"!==a.resourceType.toLowerCase()&&0!==a.creativeType.indexOf("image/")||n.push(a),o=i.iterateNext()}this.companionAds=n},this.parseWrapper=function(t){var e=this.runXpath(t,this.xpathWrapper);if(e.length>0){var n=e.pop();return void this.load(n)}this.parseFinished()},this.parseDuration=function(t){var e=this.runXpath(t,this.xpathDuration);this.duration=e.pop()},this.parseBeacons=function(t){var e=this.runXpath(t,this.xpathBeacon);this.beacons=this.beacons.concat(e)},this.parseVideoClickThroughURL=function(t){var e=this.runXpath(t,this.xpathVideoClickThroughURL),n=e.pop();n&&this.videoClickThroughURLList.push(n)},this.parseVideoClickTrackingURL=function(t){for(var e=this.runXpath(t,this.xpathVideoClickTracking),n=0;n<e.length;n++)this.videoClickTrackingURLList.push(e[n])},this.parseTrackingEvents=function(t){var e=this.runXpath(t,this.xpathTrackingEventsTime),n=this.trackingEvents;e.forEach(function(t){n[t]||(n[t]=[])});for(var i=this.runXpath(t,this.xpathTrackingEventURL),o=0;o<i.length;o++)this.trackingEvents[e[o]].push(i[o])},this.parseMediaFiles=function(t){var e=this.getXpathNodes(t,this.xpathMediaFiles);this.mediaFiles=e},this.getXMLDoc=function(t){var e=null;if(window.DOMParser){e=(new DOMParser).parseFromString(t,"text/xml")}else this.isIEParser=!0,e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t);return e?e:null},this.getXpathNodes=function(t,e){for(var n=[],i=t.evaluate(e,t,null,XPathResult.ANY_TYPE,null),o=i.iterateNext();o;){var a={url:o.textContent.trim()},r=o.attributes;r||(r=[]);for(var s=0;s<r.length;s++)a[r.item(s).nodeName]=r.item(s).nodeValue;n.push(a),o=i.iterateNext()}return n},this.runXpath=function(t,e){for(var n=[],i=t.evaluate(e,t,null,XPathResult.ANY_TYPE,null),o=i.iterateNext();o;)n.push(o.textContent.trim()),o=i.iterateNext();return n};this.popupHTML='<div class="_smaato_modal__overlay" id ="__smaato_vast_modal__"><label id = "_smaato_vast_close" class="smaato_close">X</label> <div class="_smaato_modal__box"> <video width="400" id = "_smaato_vast_video_Player" autoplay preload=true controls> Your browser does not support HTML5 video. </video></div><div id="_smaato_vast_companion_ad_" style="bottom: 0px;left:50%;transform:translate(-50%,0);position:absolute;"></div></div>',this.popupCSS="._smaato_modal { display: block; padding: 0 1em; text-align: center; width: 100%; }@media (min-width: 43.75em) { ._smaato_modal { padding: 1em 2em; text-align: right; } }._smaato_modal > #_smaato_vast_close { background: #606061; color: #FFFFFF; line-height: 25px; position: absolute; right: 0px; text-align: center; top: 0px; width: 24px; text-decoration: none; font-weight: bold; -webkit-border-radius: 12px; -moz-border-radius: 12px; border-radius: 12px; -moz-box-shadow: 1px 1px 3px #000; -webkit-box-shadow: 1px 1px 3px #000;box-shadow: 1px 1px 3px #000; cursor: hand; z-index:1000;}._smaato_modal > #_smaato_vast_close:hover { -webkit-transform: scale(0.97); -ms-transform: scale(0.97); transform: scale(0.97); }._smaato_modal input { position: absolute; right: 100px; top: 30px; z-index: -10; }._smaato_modal__overlay { background: black; bottom: 0; left: 0; position: fixed; right: 0; text-align: center; top: 0; z-index: -800; }._smaato_modal__box { padding: 1em .75em; position: relative; margin: 1em auto; width: 90%; }@media (min-height: 37.5em) { ._smaato_modal__box { left: 50%; position: absolute; top: 50%; -webkit-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%); transform: translate(-50%, -50%); } }@media (min-width: 50em) { ._smaato_modal__box { padding: 1.75em; } }._smaato_modal__box #_smaato_vast_close { background: #606061; color: #FFFFFF; line-height: 25px; position: absolute; right: 0px; text-align: center; top: 0px; width: 24px; text-decoration: none;font-weight: bold; -webkit-border-radius: 12px; -moz-border-radius: 12px; border-radius: 12px; -moz-box-shadow: 1px 1px 3px #000; -webkit-box-shadow: 1px 1px 3px #000;box-shadow: 1px 1px 3px #000; cursor: hand; z-index:1000;}._smaato_modal__box h2 { color: #FFDE16; margin-bottom: 1em; text-transform: uppercase; }.modal__box p { color: #FFDE16; text-align: left; }._smaato_modal__overlay { opacity: 0; overflow: hidden; -webkit-transform: scale(0.5); -ms-transform: scale(0.5); transform: scale(0.5); -webkit-transition: all 0.75s cubic-bezier(0.19, 1, 0.22, 1); transition: all 0.75s cubic-bezier(0.19, 1, 0.22, 1); }._smaato_modal__overlay_visible { background: black; bottom: 0; left: 0; position: fixed; right: 0; text-align: center; top: 0; z-index: -800; opacity: 1; -webkit-transform: scale(1); -ms-transform: scale(1); transform: scale(1); -webkit-transition: all 0.75s cubic-bezier(0.19, 1, 0.22, 1); transition: all 0.75s cubic-bezier(0.19, 1, 0.22, 1); z-index: 800; }._smaato_modal__overlay_visible #_smaato_vast_close { background: #606061; color: #FFFFFF; line-height: 25px; position: absolute; right: 0px; text-align: center; top: 0px; width: 24px; text-decoration: none; font-weight: bold; -webkit-border-radius: 12px; -moz-border-radius: 12px; border-radius: 12px; -moz-box-shadow: 1px 1px 3px #000; -webkit-box-shadow: 1px 1px 3px #000;box-shadow: 1px 1px 3px #000; cursor: hand; z-index:1000;} #_smaato_vast_close:hover { -webkit-transform: scale(0.97); -ms-transform: scale(0.97); transform: scale(0.97); }"};e.exports=o},{"../helpers/common":7}],6:[function(t,e,n){"use strict";e.exports={VERSION:"3.0.0",SOMA_BASE_URL:"http://soma.smaato.net/oapi/reqAd.jsp?",OUTSTREAM:{URL:"http://soma-assets.smaato.net/js/outstream/outstream.min.js",CSS:"http://soma-assets.smaato.net/css/main.css",IOS_INLINE_VIDEO:"http://soma-assets.smaato.net/js/iphone-inline-video.browser.js"},ADTAG:{CSS:"http://soma-assets.smaato.net/js/smaatoAdTag.css",URL:"http://soma-assets.smaato.net/js/smaatoAdTag.js"},CRTUS_URL:"https://gum.criteo.com/sync?c=1&r=2&j=SomaJS.handleCRTUSData"}},{}],7:[function(t,e,n){"use strict";function i(t){return c[t]}function o(t){return function(e,n){var i=new XMLHttpRequest;i.open(t.method,t.url),i.onload=function(){this.status>=200&&this.status<300?e(t.xml?i.responseXML:i.response):n({status:this.status,statusText:i.statusText})},i.onerror=function(){n({status:this.status,statusText:i.statusText})},t.headers&&Object.keys(t.headers).forEach(function(e){i.setRequestHeader(e,t.headers[e])});var o=t.params;o&&"object"===(void 0===o?"undefined":s(o))&&(o=Object.keys(o).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(o[t])}).join("&")),i.send(o)}}function a(t){return t.sync?new l(o(t)):new Promise(o(t))}function r(t){return null!==t&&void 0!==t&&"null"!==t}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=t("sync-promise"),c={mma:{width:300,height:50},medrect:{width:300,height:250},xxlarge:{width:320,height:50},xlarge:{width:300,height:50},sky:{width:120,height:600},widesky:{width:160,height:600},leader:{width:728,height:90},full_320x480:{width:320,height:480},full_480x320:{width:480,height:320},full_640x960:{width:640,height:960},full_960x640:{width:960,height:640},full_1136x640:{width:1136,height:640},full_768x1024:{width:768,height:1024},full_1024x768:{width:1024,height:768},full_800x1280:{width:800,height:1280},small:{width:120,height:20},large:{width:216,height:36},medium:{width:168,height:68}};e.exports={getDimensionSize:i,makeRequest:a,checkNotNull:r}},{"sync-promise":2}],8:[function(t,e,n){"use strict";var i=null,o=null,a=function(){var t=this.createCookie=function(t,e,n){try{var i;if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),i="; expires="+o.toGMTString()}else i="";document.cookie=t+"="+e+i+"; path=/"}catch(t){}},e=(this.createCookieOneHour=function(t,e){try{if(e){var n=new Date,i=n.getTime();i+=72e5,n.setTime(i),document.cookie=t+"="+e+"; expires="+n.toUTCString()+"; path=/"}}catch(t){}},this.eraseCookie=function(e){t(e,"",-1)},this.guidGenerator=function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}),n=this.readCookie=function(t){try{for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(e.length,o.length)}}catch(t){}return null};this.getAtuId=function(){return o||(o=n("SomaUser")),o||(o=e(),t("SomaUser",o,365)),o},this.getSessionID=function(){return i||(i=n("SomaSession")),i||(i=e(),t("SomaSession",i,0)),i},this.isCookiePresent=function(t){var e=n(t);return!(!e||""===e)},this.readSessionCookie=function(){return n("SomaSession")}};e.exports=a},{}],9:[function(t,e,n){"use strict";var i=t("../constants"),o=function(t,e){var n=function(){window.onload=function(){},window.callPapa=function(){window.top.postMessage("001:hello","*")},window.onmessage=function(t){"hello"==t.data&&(document.body.innerHTML+="<div>Hello from parent</div>")}},o=n.toString().replace(/\s+/g," ");e+="<script>"+o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))+"</script>",e+='<div><button onclick="callPapa()">Click me</button></div>';var a=document.createElement("iframe");a.setAttribute("marginwidth","0"),a.setAttribute("marginheight","0"),a.src="data:text/html;charset=utf-8,<html><head><script src="+i.ADTAG.URL+"></script></head>"+encodeURI(e)+"</html>",document.getElementById(t).appendChild(a)};e.exports=o},{"../constants":6}],10:[function(t,e,n){"use strict";function i(t){return t>=-90&&t<=90}function o(t){return t>=-180&&t<=180}function a(t){return t=t.toLowerCase(),x.indexOf(t)>-1||(console.error(t+" is a wrong dimension, please use "+x),!1)}function r(t){if(null!=t){if(t.indexOf(":")>=0){return t.split(":")[1]}}return t}function s(t){return SomaJS.checkNotNull(t)?(t=t.toLowerCase(),S.indexOf(t)>-1?"male"===t||"m"===t?"m":"female"===t||"f"===t?"f":null:(console.error(t+" is a wrong gender, please use "+S),null)):null}function l(){if(SomaJS.isCookiePresent("crtus"))return SomaJS.readCookie("crtus");var t=document.createElement("script");t.type="text/javascript",t.src=_.CRTUS_URL;var e=document.getElementsByTagName("script")[0];return e.parentNode.insertBefore(t,e),!!SomaJS.cRTUS&&SomaJS.cRTUS}function c(t){var e=t.latitude,n=t.longitude,a=t.useLocation;return E(e)&&E(n)&&i(e)&&o(n)?3:a&&E(this.lastHTML5Location)?1:null}function d(t){var e=t.latitude,n=t.longitude,a=t.useLocation;return E(e)&&E(n)&&i(e)&&o(n)?e+","+n:a&&E(this.lastHTML5Location)?this.lastHTML5Location.latitude+","+this.lastHTML5Location.longitude:null}function u(t){var e="";return E(t.keywordSearch)&&(e+=t.keywordSearch),E(t.keywords)&&(e+=","+t.keywords),""===e?null:e}function h(t){var e;if(E(t.ref))e=encodeURIComponent(t.ref);else{var n=window.location.href;window.parent!==window&&(n=document.referrer),void 0!==n&&null!==n&&n.length>0&&0===n.indexOf("http")&&(e=encodeURIComponent(n))}return e}function p(){if(window.parent===window)return"no-iframe";var t=null;try{t=window.frameElement}catch(t){}return t?t.hasAttribute("sandbox")?"sandboxed":"non-sandboxed":""!==document.domain?"unkown":"data:"!==location.protocol?"sandboxed":"unkown"}function m(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&E(n)&&E(t[n])&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function f(t){return t=t.toLowerCase(),T.indexOf(t)>-1||(console.error(t+" is a wrong format, please use "+T),!1)}function v(t){if(E(t)&&f(t)){var e=b(t);return e!==!1?e:t}return"all"}function g(t){var e=t.dimensionstrict;return E(e)?e:t.modalDisplay===!0}function y(){return[Math.random().toString(16).slice(2,10),Math.random().toString(16).slice(2,6),(.0625*Math.random()+.25).toString(16).slice(2,6),(.25*Math.random()+.5).toString(16).slice(2,6),Math.random().toString(16).slice(2,14)].join("")}function b(t){return("vast"===t||"video"===t||"outstream"===t)&&"video"}function w(t){return navigator.userAgent.indexOf(t)>-1}var _=t("../constants"),k=t("./common"),x=["mma","medrect","leader","sky","widesky","small","large","medium","xlarge","xxlarge","full_320x480","full_480x320","full_640x960","full_960x640","full_1136x640","full_768x1024","full_1024x768","full_800x1280"],T=["img","txt","richmedia","all","vast","video","outstream"],S=["m","f","male","female"],C="adtag_"+_.VERSION,E=k.checkNotNull,A=function(t,e,n,i,o){t.adDivId=t.adDivId||o.guidGenerator(),i=t.adDivId;var f=t.publisherId,_=t.adSpaceId,k=t.dimension,x=(t.dimensionstrict,t.format),T=t.formatstrict,S=E(t.width)?parseInt(t.width):0,A=E(t.height)?parseInt(t.height):0,L=b(x),M=t.baseUrl;if(!document.getElementById(i)){var I=document.createElement("div");I.id=i,document.getElementsByTagName("body")[0].appendChild(I)}t.useLocation&&navigator.geolocation.getCurrentPosition(function(t){this.lastHTML5Location=t.coords}),n[i]={smaatoFrame:!t.sync&&t.smaatoFrame,callback:e,shouldShowModalCallback:!(!t.modalDisplay||!t.shouldShowModal)&&t.shouldShowModal,modalClosedCallback:!(!t.modalDisplay||!t.modalClosedCallback)&&t.modalClosedCallback,shouldCacheModal:!(!t.modalDisplay||!t.shouldCacheModal)&&t.shouldCacheModal,dimension:E(k)&&a(k)?k:"mma",modalDisplay:!!t.modalDisplay,width:S>0&&A>0?S:null,height:S>0&&A>0?A:null},t.did=E(t.did)?r(t.did):null,t.udid=E(t.did)&&w("Android")&&40===t.did.length?t.did:null,t.androidid=E(t.did)&&w("Android")&&16===t.did.length?t.did:null,t.googleadid=E(t.did)&&w("Android")&&36===t.did.length?t.did:null,t.googlednt=E(t.did)&&w("Android")&&40!==t.did.length?t.diddnt:null,t.iosadid=E(t.did)&&!w("Android")&&w("Apple")?t.did:null,t.iosadtracking=E(t.did)&&!w("Android")&&w("Apple")?t.diddnt:null,t.wpid=E(t.did)&&w("Windows")?t.did:null;var N={adspace:E(_)?_:0,adspacename:t.adspacename,age:t.age,androidid:t.androidid,apiver:"502",bundle:t.bundle,cb:t.cb?t.cb:y(),city:t.city,client:C,country:t.country,countryCode:t.countryCode,coppa:t.coppa,criteo_uid:l()?l():null,dimension:E(k)?k:"mma",dimensionstrict:g(t),divid:i,fcid:o.getAtuId(),format:v(t.format),formatstrict:!!E(T)&&T,gender:s(t.gender),geotype:c(t),googleadid:t.googleadid,googlednt:!!t.googlednt||null,gps:d(t),height:t.height,iabcategory:t.iabcategory,imei:t.imei,iosadid:t.iosadid,iosadtracking:t.iosadid?!t.iosadtracking:null,kws:u(t),macmd5:t.macmd5,odin:t.odin,openudid:t.openudid,pb:E(t.bundle)?1:0,pub:E(f)?f:0,qs:t.qs,ref:h(t),sbiframe:"sandboxed"===p()?1:0,session:o.getSessionID(),websiteurl:t.websiteurl,width:t.width,wpid:t.wpid,zip:t.zip};if(L){if(void 0===document.evaluate)return void e(!1);N.vastver=2,N.videotype="outstream"===x?"outstream":"interstitial",N.response="XML",N.connection="wifi"}return M+=m(N),{adRequest:M,videotype:N.videotype,session:o}};e.exports={createQuery:A}},{"../constants":6,"./common":7}],11:[function(t,e,n){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n});var i=t("./components/soma"),o=t("./components/tag");void 0===window.smaatoConfigs&&(window.smaatoConfigs={});var a=window.smaatoConfigs;window.smaato_hide_modal=function(t){var e=document.getElementById("smaato_modalAd");if(e){e.style.visibility="hidden";var n=e.parentElement;n&&(void 0!==a[t]&&"function"==typeof a[t].modalClosedCallback&&a[t].modalClosedCallback(),n.removeChild(e))}},window.SomaTag=new o(a,"",void 0),window.SomaJS=new i(a,SomaTag,"",void 0),console=window.console||{log:function(){},warn:function(){},error:function(){},debug:function(){}}},{"./components/soma":3,"./components/tag":4}]},{},[11]);
//# sourceMappingURL=smaatoAdTag.min.js.map
